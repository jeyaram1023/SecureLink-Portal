<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AIML & N8N Daily Task Page</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* --- CORE ANIMATIONS --- */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            10%, 30%, 50%, 70%, 90% { transform: translateX(-4px); }
            20%, 40%, 60%, 80% { transform: translateX(4px); }
        }
        .shake-anim { animation: shake 0.4s cubic-bezier(.36,.07,.19,.97) both; }

        @keyframes float {
            0% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
            100% { transform: translateY(0px); }
        }
        .float-anim { animation: float 6s ease-in-out infinite; }

        @keyframes pulse-ring {
            0% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0.4); }
            70% { box-shadow: 0 0 0 10px rgba(99, 102, 241, 0); }
            100% { box-shadow: 0 0 0 0 rgba(99, 102, 241, 0); }
        }
        .input-focus-anim:focus { animation: pulse-ring 2s infinite; }

        /* --- GLITCH EFFECT --- */
        .glitch { position: relative; color: #fb7185; }
        .glitch::before, .glitch::after {
            content: attr(data-text); position: absolute; top: 0; left: 0; width: 100%; height: 100%; background: #1f2937;
        }
        .glitch::before { left: 2px; text-shadow: -1px 0 #00ffff; clip: rect(44px, 450px, 56px, 0); animation: glitch-anim-1 5s infinite linear alternate-reverse; }
        .glitch::after { left: -2px; text-shadow: -1px 0 #ff00ff; clip: rect(44px, 450px, 56px, 0); animation: glitch-anim-2 5s infinite linear alternate-reverse; }
        @keyframes glitch-anim-1 {
            0% { clip: rect(20px, 9999px, 80px, 0); } 100% { clip: rect(10px, 9999px, 60px, 0); }
        }
        @keyframes glitch-anim-2 {
            0% { clip: rect(10px, 9999px, 90px, 0); } 100% { clip: rect(50px, 9999px, 80px, 0); }
        }

        /* --- CONFETTI --- */
        .confetti { position: absolute; width: 10px; height: 10px; background-color: #f00; animation: confetti-fall 3s linear forwards; }
        @keyframes confetti-fall { 0% { transform: translateY(-10vh) rotate(0deg); opacity: 1; } 100% { transform: translateY(100vh) rotate(720deg); opacity: 0; } }

        /* Hide spinner */
        input[type=number]::-webkit-inner-spin-button, input[type=number]::-webkit-outer-spin-button { -webkit-appearance: none; margin: 0; }
    </style>
</head>
<body class="bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-gray-900 via-[#0a0a0c] to-black text-gray-200 font-sans antialiased min-h-screen flex flex-col items-center justify-center p-4 selection:bg-indigo-500 selection:text-white overflow-hidden">

    <!-- Confetti Container -->
    <div id="confetti-container" class="fixed inset-0 pointer-events-none z-50 overflow-hidden"></div>

    <!-- Decorative Background -->
    <div class="fixed top-0 left-0 w-full h-full overflow-hidden -z-10 pointer-events-none">
        <div class="absolute top-[-10%] left-[-10%] w-96 h-96 bg-indigo-600/20 rounded-full blur-[100px]"></div>
        <div class="absolute bottom-[-10%] right-[-10%] w-96 h-96 bg-purple-600/10 rounded-full blur-[100px]"></div>
    </div>

    <!-- Main Card -->
    <div id="main-card" class="w-full max-w-sm bg-white/5 backdrop-blur-xl border border-white/10 rounded-3xl shadow-[0_8px_32px_0_rgba(0,0,0,0.37)] overflow-hidden relative float-anim transform transition-all duration-300 hover:shadow-indigo-500/10 hover:border-white/20">
        
        <!-- Header -->
        <div class="pt-10 pb-6 px-8 text-center">
            <div class="inline-flex items-center justify-center w-12 h-12 rounded-full bg-gradient-to-tr from-indigo-500 to-purple-600 mb-4 shadow-lg shadow-indigo-500/30">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                </svg>
            </div>
            <h1 class="text-2xl font-bold tracking-wider text-white mb-1">AIML & N8N</h1>
            <p id="dynamic-greeting" class="text-sm font-medium tracking-widest uppercase text-gray-400">Loading Access...</p>
        </div>

        <!-- Content -->
        <div class="p-8 pt-2">
            <!-- Access Form -->
            <div id="access-form" class="space-y-6 transition-all duration-300">
                <div class="relative group">
                    <input type="password" id="pin-input" inputmode="numeric" maxlength="8" placeholder="••••••••" class="input-focus-anim w-full bg-black/20 border border-white/10 text-center text-3xl tracking-[0.5em] font-bold text-indigo-100 rounded-2xl py-5 focus:outline-none focus:border-indigo-500/50 focus:ring-2 focus:ring-indigo-500/20 focus:bg-black/40 transition-all placeholder:text-gray-700 placeholder:tracking-widest placeholder:text-2xl" autocomplete="off">
                    <div id="status-line" class="absolute bottom-0 left-4 right-4 h-0.5 bg-transparent transition-colors duration-300 rounded-full"></div>
                </div>
                <button id="submit-btn" onclick="validatePin()" class="w-full bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-500 hover:to-purple-500 text-white font-bold py-4 rounded-2xl transition-all duration-300 transform active:scale-[0.98] shadow-lg shadow-indigo-500/25 border border-white/10 uppercase tracking-wide text-sm">Authenticate</button>
                <p id="feedback-msg" class="text-center text-xs h-4 text-rose-400 font-medium opacity-0 transition-opacity duration-200 tracking-wide"></p>
            </div>

            <!-- Lockout View -->
            <div id="lockout-view" class="hidden space-y-8 text-center animate-fade-in py-4">
                <div class="text-rose-400 relative">
                    <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-20 h-20 bg-rose-500/20 rounded-full blur-xl"></div>
                    <svg id="lock-icon" xmlns="http://www.w3.org/2000/svg" class="h-16 w-16 mx-auto mb-4 cursor-pointer active:scale-90 transition-transform select-none relative z-10" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z" />
                    </svg>
                    <h2 id="lock-title" class="font-bold text-xl text-white mb-2" data-text="System Locked">System Locked</h2>
                    <p class="text-gray-400 text-sm leading-relaxed px-4">Maximum attempts exceeded.<br>Automatic reset in <span class="text-rose-300">12 hours</span>.</p>
                </div>
                <a id="whatsapp-link" href="#" target="_blank" class="flex items-center justify-center gap-3 w-full bg-[#25D366] hover:bg-[#20bd5a] text-white font-bold py-4 rounded-2xl transition-all active:scale-[0.98] shadow-lg shadow-green-500/20 border border-white/10">
                    <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M13.601 2.326A7.854 7.854 0 0 0 7.994 0C3.627 0 .068 3.558.064 7.926c0 1.399.366 2.76 1.057 3.965L0 16l4.204-1.102a7.933 7.933 0 0 0 3.79.965h.004c4.368 0 7.926-3.558 7.93-7.93A7.898 7.898 0 0 0 13.6 2.326zM7.994 14.521a6.573 6.573 0 0 1-3.356-.92l-.24-.144-2.494.654.666-2.433-.156-.251a6.56 6.56 0 0 1-1.007-3.505c0-3.626 2.957-6.584 6.591-6.584a6.56 6.56 0 0 1 4.66 1.931 6.557 6.557 0 0 1 1.928 4.66c-.004 3.639-2.961 6.592-6.592 6.592z"/></svg>
                    Contact via WhatsApp
                </a>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <div class="fixed bottom-6 text-gray-500/40 text-[10px] tracking-[0.2em] font-medium uppercase select-none pointer-events-none">&copy; jeya studio</div>

    <script>
        // --- CONFIGURATION ---
        // Change ENABLE_CLOAKING to false if your target site shows a blank screen
        const ENABLE_CLOAKING = true; 

        // Current PIN: 20250101
        const _s1 = "MTAyMz"; const _s2 = "EyMzA=";
       // url
        const _u1 = "aHR0cHM6Ly9kb2NzLmdvb2dsZS5jb20vZm9ybXMvZC9lLzFGQUlwUUxTZVBQM3hPR2s0MlB2SU5EdEstOWxDRmlF"; const _u2 = "WGpLU3FHcV9MUlZ2ZFpPX1JGRnQ5S1lRL3ZpZXdmb3JtP3VzcD1wdWJsaXNoLWVkaXRvcg==";
        // WhatsApp:
        const _wa = "8309631052"; 

        // CONSTANTS
        const MAX_ATTEMPTS = 2;
        const LOCKOUT_HOURS = 12;
        const IDLE_TIMEOUT_MS = 60000;
        const STORAGE_KEY = "_secure_access_attempts";
        const STORAGE_TIME_KEY = "_secure_access_lock_ts";
        const audioCtx = new (window.AudioContext || window.webkitAudioContext)();

        // ELEMENTS
        const pinInput = document.getElementById('pin-input');
        const submitBtn = document.getElementById('submit-btn');
        const feedbackMsg = document.getElementById('feedback-msg');
        const formView = document.getElementById('access-form');
        const lockoutView = document.getElementById('lockout-view');
        const waLink = document.getElementById('whatsapp-link');
        const statusLine = document.getElementById('status-line');
        const lockIcon = document.getElementById('lock-icon');
        const greetingEl = document.getElementById('dynamic-greeting');
        const lockTitle = document.getElementById('lock-title');

        document.addEventListener('DOMContentLoaded', () => {
            setDynamicGreeting(); checkLockout(); setupInactivityTimer(); setupProtection();
            waLink.href = `https://wa.me/${_wa}`;
            pinInput.addEventListener('keypress', (e) => { if (e.key === 'Enter') validatePin(); });
            pinInput.addEventListener('input', function (e) { this.value = this.value.replace(/[^0-9]/g, ''); });

            // Triple Tap
            let tapCount = 0; let lastTapTime = 0;
            if(lockIcon) {
                lockIcon.addEventListener('click', (e) => {
                    e.preventDefault(); playClickSound();
                    const currentTime = new Date().getTime();
                    if ((currentTime - lastTapTime) < 500) tapCount++; else tapCount = 1;
                    lastTapTime = currentTime;
                    if (tapCount === 7) {
                        tapCount = 0; lockIcon.style.color = '#4ade80';
                        setTimeout(() => { forceUnlock(); lockIcon.style.color = ''; }, 300);
                    }
                });
            }
        });

        // --- CORE FUNCTIONS ---
        function validatePin() {
            const userPin = pinInput.value;
            if (localStorage.getItem(STORAGE_TIME_KEY) || getAttempts() >= MAX_ATTEMPTS) { checkLockout(); return; }
            if (userPin.length !== 8) { showError("PIN must be 8 digits"); return; }
            
            if (userPin === atob(_s1 + _s2)) {
                handleSuccess();
            } else {
                const newCount = incrementAttempts();
                pinInput.value = '';
                if ((MAX_ATTEMPTS - newCount) <= 0) lockUI(true);
                else showError(`Incorrect PIN. ${MAX_ATTEMPTS - newCount} attempt remaining.`);
            }
        }

        function handleSuccess() {
            playSuccessSound();
            triggerConfetti();

            // 1. Open New Tab IMMEDIATELY (prevents popup blocker)
            // We open a blank window first, then fill it later
            let secretWindow;
            try {
                secretWindow = window.open('about:blank', '_blank');
                if (!secretWindow) {
                    alert('Popup blocked! Please allow popups for this site.');
                    return;
                }
            } catch (e) { console.error(e); }

            // 2. Set "Loading" state in new tab
            if (secretWindow) {
                secretWindow.document.write(`
                    <html><head><title>Establishing Connection...</title>
                    <style>body{background:#000;color:#fff;font-family:sans-serif;display:flex;align-items:center;justify-content:center;height:100vh;margin:0;}</style>
                    </head><body><div style="text-align:center"><h3>Verifying Credentials...</h3><p>Establishing secure tunnel.</p></div></body></html>
                `);
            }

            // 3. UI Updates on Current Page
            submitBtn.innerHTML = `Verifying...`;
            submitBtn.classList.add('bg-green-500');
            statusLine.classList.add('bg-green-500');
            
            const target = atob(_u1 + _u2);

            // 4. Redirect Logic (Delayed for animation)
            setTimeout(() => {
                if (ENABLE_CLOAKING) {
                    // STEALTH MODE: IFRAME CLOAKING
                    // This keeps URL as "about:blank" in the new tab
                    const cloakHTML = `
                        <!DOCTYPE html>
                        <html>
                        <head>
                            <title>Secure Task</title>
                            <style>
                                body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background-color: #000; }
                                iframe { border: none; width: 100%; height: 100%; display: block; }
                            </style>
                        </head>
                        <body>
                            <iframe src="${target}" allowfullscreen sandbox="allow-forms allow-scripts allow-same-origin allow-popups allow-modals"></iframe>
                        </body>
                        </html>
                    `;
                    secretWindow.document.open();
                    secretWindow.document.write(cloakHTML);
                    secretWindow.document.close();
                } else {
                    // STANDARD MODE: NORMAL REDIRECT
                    // Uses 'replace' so the "about:blank" entry isn't in history
                    secretWindow.location.replace(target);
                }

                // 5. Clean up current page security
                setTimeout(() => {
                    window.location.reload(); // Reset main page to lock screen
                }, 500);

            }, 1200);
        }

        // --- UTILS ---
        function getAttempts() { return parseInt(localStorage.getItem(STORAGE_KEY) || '0'); }
        function incrementAttempts() { const c = getAttempts() + 1; localStorage.setItem(STORAGE_KEY, c); return c; }
        
        function checkLockout() {
            const t = localStorage.getItem(STORAGE_TIME_KEY);
            if (t && (Date.now() - parseInt(t) <= LOCKOUT_HOURS * 3600000)) { lockUI(false); return; }
            if (t) { localStorage.removeItem(STORAGE_KEY); localStorage.removeItem(STORAGE_TIME_KEY); return; }
            if (getAttempts() >= MAX_ATTEMPTS) lockUI(true);
        }

        function lockUI(stamp = false) {
            if (stamp && !localStorage.getItem(STORAGE_TIME_KEY)) localStorage.setItem(STORAGE_TIME_KEY, Date.now());
            formView.classList.add('hidden'); lockoutView.classList.remove('hidden'); lockTitle.classList.add('glitch');
            pinInput.disabled = true; submitBtn.disabled = true;
        }

        function forceUnlock() {
            playSuccessSound(); localStorage.removeItem(STORAGE_KEY); localStorage.removeItem(STORAGE_TIME_KEY);
            lockoutView.classList.add('hidden'); formView.classList.remove('hidden'); lockTitle.classList.remove('glitch');
            pinInput.disabled = false; submitBtn.disabled = false; pinInput.value = ''; setTimeout(() => pinInput.focus(), 100);
        }

        function showError(msg) {
            playErrorSound(); feedbackMsg.textContent = msg; feedbackMsg.classList.remove('opacity-0');
            const c = document.getElementById('main-card'); c.classList.remove('shake-anim'); void c.offsetWidth; c.classList.add('shake-anim');
            statusLine.classList.add('bg-rose-500'); setTimeout(() => statusLine.classList.remove('bg-rose-500'), 1000);
        }

        function setupProtection() {
            document.addEventListener('contextmenu', e => e.preventDefault());
            document.addEventListener('keydown', e => { if (e.key === 'F12' || (e.ctrlKey && e.shiftKey && (e.key === 'I' || e.key === 'J')) || (e.ctrlKey && e.key === 'U')) e.preventDefault(); });
        }

        function setupInactivityTimer() {
            let t; const r = () => { clearTimeout(t); t = setTimeout(() => window.location.reload(), IDLE_TIMEOUT_MS); };
            window.onload = r; document.onmousemove = r; document.onkeypress = r;
        }

        function setDynamicGreeting() {
            const h = new Date().getHours();
            greetingEl.textContent = `${h < 12 ? "Good Morning" : h < 18 ? "Good Afternoon" : "Good Evening"} • Daily Access`;
        }

        // --- AUDIO & FX ---
        function playErrorSound() { playTone(150, 'sawtooth', 0.3); }
        function playSuccessSound() { playTone(500, 'sine', 0.5, true); }
        function playClickSound() { playTone(800, 'square', 0.05); }
        function playTone(freq, type, dur, ramp=false) {
            if (audioCtx.state === 'suspended') audioCtx.resume();
            const o = audioCtx.createOscillator(); const g = audioCtx.createGain();
            o.type = type; o.frequency.setValueAtTime(freq, audioCtx.currentTime);
            if(ramp) o.frequency.exponentialRampToValueAtTime(freq*2, audioCtx.currentTime+0.1);
            g.gain.setValueAtTime(0.1, audioCtx.currentTime); g.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime+dur);
            o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+dur);
        }

        function triggerConfetti() {
            const c = document.getElementById('confetti-container'); const cols = ['#818cf8', '#c084fc', '#4ade80', '#fb7185', '#fff'];
            for (let i = 0; i < 50; i++) {
                const e = document.createElement('div'); e.classList.add('confetti');
                e.style.left = Math.random()*100+'vw'; e.style.backgroundColor = cols[Math.floor(Math.random()*cols.length)];
                e.style.animationDuration = (Math.random()*2+2)+'s'; e.style.width = e.style.height = (Math.random()*8+5)+'px';
                c.appendChild(e); setTimeout(() => e.remove(), 4000);
            }
        }

        // --- HELPERS ---
        window.generateNewPinCode = function(p) { if(!p||p.length!==8)return console.warn("8 digits required"); const e=btoa(p); console.log(`const _s1 = "${e.substring(0,4)}";\nconst _s2 = "${e.substring(4)}";`); };
        window.generateNewUrlCode = function(u) { if(!u)return; const e=btoa(u), i=Math.floor(e.length/2); console.log(`const _u1 = "${e.substring(0,i)}";\nconst _u2 = "${e.substring(i)}";`); };
    </script>
</body>
</html>
